package kontaktu;

public class PostaKontaktua extends Kontaktua implements Balidagarria {
	
	private String postaElektronikoa;
	
	public PostaKontaktua(String postaElektronikoa) {
		this.postaElektronikoa=postaElektronikoa;
		balidatu();
	}

	@Override
	public boolean balidatu() {
		
		if(postaElektronikoa==null && postaElektronikoa.isEmpty()) {
			setBaliozkoa(false);
			return false;
		}
		
		if(postaElektronikoa.charAt(0)=='@' || postaElektronikoa.charAt(postaElektronikoa.length()-1)=='@') {
			setBaliozkoa(false);
			return false;
		}
		
		int kont=0;
		for(int i=1; i<postaElektronikoa.length()-1; i++) {
			if(postaElektronikoa.charAt(i)=='@')
			kont++;
		}
		if(kont!=1) {
			setBaliozkoa(false);
			return false;
		}
		
		if(postaElektronikoa.charAt(postaElektronikoa.indexOf('@')+1)=='.' || postaElektronikoa.charAt(postaElektronikoa.length()-1)=='.' ) {
			setBaliozkoa(false);
			return false;
		}
		
		int kontPunto=0;
		for(int i=postaElektronikoa.indexOf('@')+2; i<postaElektronikoa.length()-1; i++) {
			if(postaElektronikoa.charAt(i)=='.')
			kontPunto++;
		}
		if(kontPunto!=1) {
			setBaliozkoa(false);
			return false;
		}
		
		if(postaElektronikoa.substring(postaElektronikoa.lastIndexOf('.')).length()<2) {
			setBaliozkoa(false);
			return false;
		}
		
		
		// TODO Auto-generated method stub
		return true;
	}
	
	public static void main(String[] args) {
		PostaKontaktua p1=new PostaKontaktua("ashleycontreras@.gmail.com");
		
		System.out.println(p1.balidatu());
	}
	
	

}
